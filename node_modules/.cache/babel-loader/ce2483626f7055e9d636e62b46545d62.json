{"ast":null,"code":"import _slicedToArray from\"D:/siteapp - Kopya/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import Axios from\"axios\";import{useHistory}from\"react-router-dom\";import{useSelector}from\"react-redux\";import{selectUser}from\"../reducer/infuser\";import{AiFillLike}from\"react-icons/ai\";import{AiFillDislike}from\"react-icons/ai\";import{BsHeartFill}from\"react-icons/bs\";import ReactScrollableFeed from\"react-scrollable-feed\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function MainPage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),postList=_useState2[0],setPostList=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),role=_useState4[0],setRole=_useState4[1];var user=useSelector(selectUser);var history=useHistory();Axios.defaults.withCredentials=true;useEffect(function(){Axios.get(\"http://localhost:3001/api/login\").then(function(response){if(response.data.loggedIn===true){setRole(response.data.user[0].role);}});Axios.get(\"http://localhost:3001/api/get/\").then(function(data){setPostList(data.data);console.log(data.data);});},[]);var likePost=function likePost(id){Axios.post(\"http://localhost:3001/api/like/\".concat(id)).then(function(response){console.log(\"response\");alert(\"you liked the post\");});};var deletex=function deletex(id){Axios.post(\"http://localhost:3001/api/delete/\".concat(id));setTimeout(function(){window.location.reload(false);},200);};return/*#__PURE__*/_jsx(\"div\",{className:\"Appx\",children:/*#__PURE__*/_jsx(ReactScrollableFeed,{children:/*#__PURE__*/_jsx(\"div\",{style:{backgroundColor:\"#18191A\",color:\"white\"},className:\"PostContainer\",children:postList.map(function(val,key){return/*#__PURE__*/_jsxs(\"div\",{className:\"Post\",style:{border:\"1px solid #242526\",backgroundColor:\"#242526\",borderTopRightRadius:\"25px\",borderTopLeftRadius:\"25px\"},onClick:function onClick(){//history.push(`/post/${val.id}`);\n},children:[/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",right:\"92.3%\"},className:\"bottom\",children:/*#__PURE__*/_jsx(\"h4\",{children:user.username})}),/*#__PURE__*/_jsx(\"h1\",{children:val.title}),/*#__PURE__*/_jsx(\"p\",{children:val.post_text.length>500?val.post_text.substring(0,500)+\"...\":val.post_text}),/*#__PURE__*/_jsx(BsHeartFill,{style:{position:\"relative\",right:\"48.8%\",top:\"27px\",color:\"#633b86\"}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",fontSize:\"20px\"},children:[\" \",/*#__PURE__*/_jsx(AiFillLike,{style:{position:\"relative\",right:\"90%\"}}),\" \",/*#__PURE__*/_jsxs(\"strong\",{children:[val.likes,\" like\"]})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:function onClick(){likePost(val.id);},className:\"likes\",style:{position:\"absolute\",right:\"49.9%\",width:\"462px\",border:\"1px solid #18191A\",color:\"white\",borderBottomLeftRadius:\"10px\"},children:[/*#__PURE__*/_jsx(AiFillLike,{}),\"Be\\u011Fen\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"likes\",style:{position:\"absolute\",right:\"3.8%\",width:\"462px\",border:\"1px solid #18191A\",color:\"white\",borderBottomRightRadius:\"10px\"},children:[/*#__PURE__*/_jsx(AiFillDislike,{}),\"disslike\"]}),role===\"admin\"?/*#__PURE__*/_jsx(\"button\",{className:\"btn-success bi bi-trash\",onClick:function onClick(){deletex(val.id);},children:\"Sil\"}):\"\"]},key);})})})});}","map":{"version":3,"sources":["D:/siteapp - Kopya/client/src/pages/MainPage.js"],"names":["React","useState","useEffect","Axios","useHistory","useSelector","selectUser","AiFillLike","AiFillDislike","BsHeartFill","ReactScrollableFeed","MainPage","postList","setPostList","role","setRole","user","history","defaults","withCredentials","get","then","response","data","loggedIn","console","log","likePost","id","post","alert","deletex","setTimeout","window","location","reload","backgroundColor","color","map","val","key","border","borderTopRightRadius","borderTopLeftRadius","position","right","username","title","post_text","length","substring","top","display","fontSize","likes","width","borderBottomLeftRadius","borderBottomRightRadius"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Axios from \"axios\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectUser } from \"../reducer/infuser\";\r\nimport { AiFillLike } from \"react-icons/ai\";\r\nimport { AiFillDislike } from \"react-icons/ai\";\r\nimport { BsHeartFill } from \"react-icons/bs\";\r\nimport ReactScrollableFeed from \"react-scrollable-feed\";\r\n\r\nexport default function MainPage() {\r\n  const [postList, setPostList] = useState([]);\r\n  const [role, setRole] = useState(\"\");\r\n\r\n  const user = useSelector(selectUser);\r\n\r\n  let history = useHistory();\r\n\r\n  Axios.defaults.withCredentials = true;\r\n\r\n  useEffect(() => {\r\n    Axios.get(\"http://localhost:3001/api/login\").then((response) => {\r\n      if (response.data.loggedIn === true) {\r\n        setRole(response.data.user[0].role);\r\n      }\r\n    });\r\n    Axios.get(\"http://localhost:3001/api/get/\").then((data) => {\r\n      setPostList(data.data);\r\n      console.log(data.data);\r\n    });\r\n  }, []);\r\n\r\n  const likePost = (id) => {\r\n    Axios.post(`http://localhost:3001/api/like/${id}`).then((response) => {\r\n      console.log(\"response\");\r\n      alert(\"you liked the post\");\r\n    });\r\n  };\r\n\r\n  const deletex = (id) => {\r\n    Axios.post(`http://localhost:3001/api/delete/${id}`);\r\n    setTimeout(() => {\r\n      window.location.reload(false);\r\n    }, 200);\r\n  };\r\n\r\n  return (\r\n    <div className=\"Appx\">\r\n      <ReactScrollableFeed>\r\n        <div style={{backgroundColor:\"#18191A\", color:\"white\"}} className=\"PostContainer\">\r\n          {postList.map((val, key) => {\r\n            return (\r\n              <div\r\n\r\n                className=\"Post\"\r\n                style={{ border: \"1px solid #242526\",backgroundColor:\"#242526\", borderTopRightRadius:\"25px\", borderTopLeftRadius:\"25px\" }}\r\n                key={key}\r\n                onClick={() => {\r\n                  //history.push(`/post/${val.id}`);\r\n                }}\r\n              >\r\n                <div style={{position:\"absolute\",right:\"92.3%\"}} className=\"bottom\">\r\n                  <h4>{user.username}</h4>\r\n                </div>\r\n                <h1>{val.title}</h1>\r\n                <p>\r\n                  {val.post_text.length > 500\r\n                    ? val.post_text.substring(0, 500) + \"...\"\r\n                    : val.post_text}\r\n                </p>\r\n                <BsHeartFill\r\n                  style={{\r\n                    position: \"relative\",\r\n                    right: \"48.8%\",\r\n                    top: \"27px\",\r\n                    color: \"#633b86\",\r\n                  }}\r\n                />\r\n                <div style={{ display: \"flex\", fontSize: \"20px\"}}>\r\n                  {\" \"}\r\n                  <AiFillLike\r\n                    style={{ position: \"relative\", right: \"90%\" }}\r\n                  />{\" \"}\r\n                  <strong>{val.likes} like</strong>\r\n                  </div>\r\n                  <div\r\n                  onClick={() => {\r\n                    likePost(val.id)\r\n                  }}\r\n                  className=\"likes\"\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    right: \"49.9%\",\r\n                    width: \"462px\",\r\n                    border: \"1px solid #18191A\",\r\n                    color: \"white\",\r\n                    borderBottomLeftRadius:\"10px\"\r\n                  }}\r\n                >\r\n                  <AiFillLike/>\r\n                  BeÄŸen\r\n                </div>\r\n                <div\r\n                  className=\"likes\"\r\n                  style={{\r\n                    position: \"absolute\",\r\n                    right: \"3.8%\",\r\n                    width: \"462px\",\r\n                    border: \"1px solid #18191A\",\r\n                    color: \"white\",\r\n                    borderBottomRightRadius:\"10px\"\r\n                  }}\r\n                >\r\n                  <AiFillDislike />\r\n                  disslike\r\n                </div>\r\n                \r\n\r\n                \r\n\r\n                {role === \"admin\" ? (\r\n                  <button\r\n                    className=\"btn-success bi bi-trash\"\r\n                    onClick={() => {\r\n                      deletex(val.id);\r\n                    }}\r\n                  >\r\n                    Sil\r\n                  </button>\r\n                ) : (\r\n                  \"\"\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </ReactScrollableFeed>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}